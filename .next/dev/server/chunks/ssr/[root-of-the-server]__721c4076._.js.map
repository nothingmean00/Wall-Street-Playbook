{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/malik/Downloads/wall-street-playbook/components/exit-intent-popup.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { X, Mail, ArrowRight, Loader2, Check } from \"lucide-react\"\r\n\r\nexport function ExitIntentPopup() {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [email, setEmail] = useState(\"\")\r\n  const [status, setStatus] = useState<\"idle\" | \"loading\" | \"success\" | \"error\">(\"idle\")\r\n  const [hasShown, setHasShown] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Check if we've already shown the popup this session\r\n    const shown = sessionStorage.getItem(\"exitPopupShown\")\r\n    if (shown) {\r\n      setHasShown(true)\r\n      return\r\n    }\r\n\r\n    const handleMouseLeave = (e: MouseEvent) => {\r\n      // Only trigger when mouse leaves through the top of the viewport\r\n      if (e.clientY <= 0 && !hasShown) {\r\n        setIsOpen(true)\r\n        setHasShown(true)\r\n        sessionStorage.setItem(\"exitPopupShown\", \"true\")\r\n      }\r\n    }\r\n\r\n    // Also show after 45 seconds if still on page\r\n    const timer = setTimeout(() => {\r\n      if (!hasShown && !sessionStorage.getItem(\"exitPopupShown\")) {\r\n        setIsOpen(true)\r\n        setHasShown(true)\r\n        sessionStorage.setItem(\"exitPopupShown\", \"true\")\r\n      }\r\n    }, 45000)\r\n\r\n    document.addEventListener(\"mouseleave\", handleMouseLeave)\r\n    \r\n    return () => {\r\n      document.removeEventListener(\"mouseleave\", handleMouseLeave)\r\n      clearTimeout(timer)\r\n    }\r\n  }, [hasShown])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!email || !email.includes(\"@\")) {\r\n      setStatus(\"error\")\r\n      return\r\n    }\r\n\r\n    setStatus(\"loading\")\r\n\r\n    try {\r\n      const response = await fetch(\"/api/subscribe\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, source: \"exit_popup\" }),\r\n      })\r\n\r\n      if (!response.ok) throw new Error(\"Failed\")\r\n\r\n      setStatus(\"success\")\r\n    } catch {\r\n      setStatus(\"error\")\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      {/* Backdrop */}\r\n      <div \r\n        className=\"absolute inset-0 bg-navy/80 backdrop-blur-sm\"\r\n        onClick={() => setIsOpen(false)}\r\n      />\r\n      \r\n      {/* Modal */}\r\n      <div className=\"relative w-full max-w-lg bg-white rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300\">\r\n        {/* Close button */}\r\n        <button\r\n          onClick={() => setIsOpen(false)}\r\n          className=\"absolute right-4 top-4 p-1 text-charcoal/50 hover:text-charcoal transition-colors z-10\"\r\n        >\r\n          <X className=\"h-5 w-5\" />\r\n        </button>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-8 sm:p-10\">\r\n          {status === \"success\" ? (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"mx-auto w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mb-4\">\r\n                <Check className=\"h-8 w-8 text-green-600\" />\r\n              </div>\r\n              <h3 className=\"text-2xl font-bold text-charcoal mb-2\">You're in!</h3>\r\n              <p className=\"text-charcoal/70\">Check your inbox for recruiting insights and free resources.</p>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"mt-6 text-sm font-medium text-gold hover:text-navy transition-colors\"\r\n              >\r\n                Continue browsing\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Icon */}\r\n              <div className=\"mx-auto w-14 h-14 rounded-xl bg-gold/10 flex items-center justify-center mb-6\">\r\n                <Mail className=\"h-7 w-7 text-gold\" />\r\n              </div>\r\n\r\n              {/* Headline */}\r\n              <h3 className=\"text-2xl sm:text-3xl font-bold text-charcoal text-center mb-3\">\r\n                Before you go...\r\n              </h3>\r\n              \r\n              <p className=\"text-center text-charcoal/70 mb-6\">\r\n                Get free recruiting insights, technical prep tips, and early access to new playbooks.\r\n                <span className=\"block mt-2 text-sm font-medium text-navy\">\r\n                  Join 2,000+ candidates preparing for IB, PE, and HF roles.\r\n                </span>\r\n              </p>\r\n\r\n              {/* Form */}\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  placeholder=\"Enter your email\"\r\n                  className=\"w-full rounded-lg border border-border bg-off-white px-4 py-3.5 text-charcoal placeholder:text-charcoal/40 focus:border-gold focus:outline-none focus:ring-2 focus:ring-gold/20\"\r\n                  disabled={status === \"loading\"}\r\n                />\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={status === \"loading\"}\r\n                  className=\"w-full flex items-center justify-center gap-2 rounded-lg bg-navy px-6 py-3.5 font-semibold text-white transition-colors hover:bg-gold hover:text-navy disabled:opacity-50\"\r\n                >\r\n                  {status === \"loading\" ? (\r\n                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    <>\r\n                      Get Free Insights\r\n                      <ArrowRight className=\"h-4 w-4\" />\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </form>\r\n\r\n              {status === \"error\" && (\r\n                <p className=\"mt-3 text-sm text-red-500 text-center\">\r\n                  Please enter a valid email address.\r\n                </p>\r\n              )}\r\n\r\n              <p className=\"mt-4 text-xs text-charcoal/50 text-center\">\r\n                No spam. Unsubscribe anytime. We respect your inbox.\r\n              </p>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* Bottom accent */}\r\n        <div className=\"h-1.5 bg-gradient-to-r from-gold via-gold/70 to-gold\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}