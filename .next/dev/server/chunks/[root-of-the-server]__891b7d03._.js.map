{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/malik/Downloads/wall-street-playbook/lib/db.ts"],"sourcesContent":["import { neon, NeonQueryFunction } from '@neondatabase/serverless'\r\n\r\nlet sql: NeonQueryFunction<false, false> | null = null\r\n\r\nexport function getDb() {\r\n  if (!sql) {\r\n    if (!process.env.DATABASE_URL) {\r\n      throw new Error('DATABASE_URL environment variable is not set')\r\n    }\r\n    sql = neon(process.env.DATABASE_URL)\r\n  }\r\n  return sql\r\n}\r\n\r\n// Initialize database tables\r\nexport async function initDatabase() {\r\n  const db = getDb()\r\n  \r\n  await db`\r\n    CREATE TABLE IF NOT EXISTS email_subscribers (\r\n      id SERIAL PRIMARY KEY,\r\n      email VARCHAR(255) UNIQUE NOT NULL,\r\n      source VARCHAR(50) DEFAULT 'website',\r\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n    )\r\n  `\r\n\r\n  await db`\r\n    CREATE TABLE IF NOT EXISTS contact_submissions (\r\n      id SERIAL PRIMARY KEY,\r\n      first_name VARCHAR(100),\r\n      last_name VARCHAR(100),\r\n      email VARCHAR(255) NOT NULL,\r\n      subject VARCHAR(100),\r\n      message TEXT NOT NULL,\r\n      status VARCHAR(20) DEFAULT 'new',\r\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n    )\r\n  `\r\n\r\n  await db`\r\n    CREATE TABLE IF NOT EXISTS orders (\r\n      id SERIAL PRIMARY KEY,\r\n      stripe_session_id VARCHAR(255) UNIQUE,\r\n      stripe_customer_id VARCHAR(255),\r\n      email VARCHAR(255) NOT NULL,\r\n      product_type VARCHAR(50) NOT NULL,\r\n      product_id VARCHAR(100) NOT NULL,\r\n      amount INTEGER NOT NULL,\r\n      status VARCHAR(20) DEFAULT 'pending',\r\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n    )\r\n  `\r\n\r\n  await db`\r\n    CREATE TABLE IF NOT EXISTS resume_submissions (\r\n      id SERIAL PRIMARY KEY,\r\n      name VARCHAR(200) NOT NULL,\r\n      email VARCHAR(255) NOT NULL,\r\n      phone VARCHAR(50),\r\n      service_type VARCHAR(50) NOT NULL,\r\n      target_role VARCHAR(200),\r\n      target_firms TEXT,\r\n      current_status VARCHAR(100),\r\n      experience_level VARCHAR(50),\r\n      timeline VARCHAR(100),\r\n      specific_concerns TEXT,\r\n      additional_notes TEXT,\r\n      resume_url TEXT NOT NULL,\r\n      resume_filename VARCHAR(255),\r\n      status VARCHAR(30) DEFAULT 'pending',\r\n      admin_notes TEXT,\r\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n    )\r\n  `\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,IAAI,MAA8C;AAE3C,SAAS;IACd,IAAI,CAAC,KAAK;QACR,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY,EAAE;YAC7B,MAAM,IAAI,MAAM;QAClB;QACA,MAAM,IAAA,2MAAI,EAAC,QAAQ,GAAG,CAAC,YAAY;IACrC;IACA,OAAO;AACT;AAGO,eAAe;IACpB,MAAM,KAAK;IAEX,MAAM,EAAE,CAAC;;;;;;;EAOT,CAAC;IAED,MAAM,EAAE,CAAC;;;;;;;;;;;EAWT,CAAC;IAED,MAAM,EAAE,CAAC;;;;;;;;;;;;EAYT,CAAC;IAED,MAAM,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;EAqBT,CAAC;AACH"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/malik/Downloads/wall-street-playbook/app/api/admin/submissions/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { getDb } from '@/lib/db'\r\n\r\n// Simple admin auth check\r\nfunction isAuthorized(request: NextRequest): boolean {\r\n  const authHeader = request.headers.get('authorization')\r\n  if (!authHeader) return false\r\n  \r\n  const adminPassword = process.env.ADMIN_PASSWORD?.trim()\r\n  if (!adminPassword) return false\r\n  \r\n  const token = authHeader.replace('Bearer ', '').trim()\r\n  return token === adminPassword\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  if (!isAuthorized(request)) {\r\n    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n  }\r\n\r\n  try {\r\n    const sql = getDb()\r\n    \r\n    const submissions = await sql`\r\n      SELECT \r\n        id, name, email, phone, service_type, target_role, target_firms,\r\n        current_status, experience_level, timeline, specific_concerns,\r\n        additional_notes, resume_url, resume_filename, status, admin_notes,\r\n        created_at, updated_at\r\n      FROM resume_submissions\r\n      ORDER BY created_at DESC\r\n    `\r\n\r\n    return NextResponse.json({ submissions })\r\n  } catch (error) {\r\n    console.error('Error fetching submissions:', error)\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch submissions' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,0BAA0B;AAC1B,SAAS,aAAa,OAAoB;IACxC,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,gBAAgB,QAAQ,GAAG,CAAC,cAAc,EAAE;IAClD,IAAI,CAAC,eAAe,OAAO;IAE3B,MAAM,QAAQ,WAAW,OAAO,CAAC,WAAW,IAAI,IAAI;IACpD,OAAO,UAAU;AACnB;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI,CAAC,aAAa,UAAU;QAC1B,OAAO,2LAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,IAAI;QACF,MAAM,MAAM,IAAA,+JAAK;QAEjB,MAAM,cAAc,MAAM,GAAG,CAAC;;;;;;;;IAQ9B,CAAC;QAED,OAAO,2LAAY,CAAC,IAAI,CAAC;YAAE;QAAY;IACzC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,2LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA8B,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}